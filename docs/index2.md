# 令和4年度 民間ユースケース開発　UC22-023「歩行者移動・回遊行動シミュレーション」の成果物


## 1. 概要
本リポジトリは、国土交通省民間ユースケース開発UC22-023「歩行者移動・回遊行動シミュレーション」における歩行シミュレーション結果を表示するUnityアセットの利用方法及び説明となります。
このドキュメントでは、ユースケースの概要、Unityアセットの概要、利用手順、注意事項等を記載しています。


## 2．「歩行者移動・回遊行動シミュレーション」について
### ユースケースの概要
近年、全国的に「人間中心のまちづくり」が志向されているなか、その実現のためにさまざまなまちづくり活動（エリアマネジメント）が実施されています。エリアマネジメントを効果的なものとするためには、都市空間・歩行者の行動特性を理解することが必要です。

今回の実証実験では、東京都西新宿エリアを対象として3D都市モデルを活用した歩行者行動シミュレーションを実施し、そのシミュレーション結果の分析と可視化によって、平常時・イベント実施時等におけるまちの賑わい創出のための施策の検討や検証を支援するツールを開発しました。

### 開発システムの概要
シミュレーション結果を可視化するため、本Unityアセットは下記の機能を持ちます。
- 歩行シミュレーションの結果に基づき人（ゲームオブジェクト）が動く機能
- 見たい場面に合わせてシナリオを切り替えられる機能
	- シナリオは平日/休日の2区分、平常時/イベント実施・広告非設置時/イベント実施・広告設置時の3区分のかけ合わせ（6区分）を表示可能
- ソフトウェア内のカメラの位置を対象地区の俯瞰図（2D）で表示する機能
- 歩行シミュレーションの結果の分析に資する通行量の変化（平常時に対する各シナリオの通行量の比）を表示したヒートマップを表示する機能
- 任意の時点の人流を表示できるスライドバーの機能
- 特に通行量の変化が大きい道路及びイベント周辺の道路において、通行量とその変化を時系列に表示したグラフを表示する機能

## 3．利用手順
利用手順として、インストール方法、インストール後の使い方、動作環境、前提ソフトウェアを記載します。

### インストール方法
1. 本リポジトリ内にあるファイル一式を、「Code」>「Download ZIP」からダウンロードします。

2. ダウンロードされた「PLATEAU-UC22-023-Pedestrian-Simulation-Result-Viewer.zip」ファイルを解凍し、「pedestrianflowviewer.unitypackage」を取得します。

3. Unity Editorを起動し、「Import Package」>「Custom Package」から「pedestrianflowviewer.unitypackage」を取り込んでください。

### 使い方
1. 「PLATEAU-UC22-023-Pedestrian-Simulation-Result-Viewer.zip」内にある、「simulation-result」内にある下記6ファイルを、「Assets」と同じディレクトリに格納してください。
- 平日_平常時
- 平日_イベント実施・広告設置時
- 平日_イベント実施・広告非設置時
- 土日祝日_平常時
- 土日祝日_イベント実施・広告設置時
- 土日祝日_イベント実施・広告非設置時

2. また、「simulation-result」内には「simulation-log.zip」が格納されているので同ファイルを併せて解凍してください。

3. 「simulation-log.zip」を解凍すると、下記6ファイルが含まれています。下記ファイルを1. で格納したディレクトリに格納してください。
- agent_log_平日_平常時.csv　（-> 「平日_平常時」直下に格納してください。）
- agent_log_平日_イベント実施・広告設置時.csv　（-> 「平日_イベント実施・広告設置時」直下に格納してください。）
- agent_log_平日_イベント実施・広告非設置時.csv　（-> 「平日_イベント実施・広告非設置時」直下に格納してください。）
- agent_log_土日祝日_平常時.csv　（-> 「土日祝日_平常時」直下に格納してください。）
- agent_log_土日祝日_イベント実施・広告設置時.csv　（-> 「土日祝日_イベント実施・広告設置時」直下に格納してください。）
- agent_log_土日祝日_イベント実施・広告非設置時.csv　（-> 「土日祝日_イベント実施・広告非設置時」直下に格納してください。）

4. なお、本アセット内に3D都市モデルは含まれておりません。

### 動作環境、前提ソフトウェア
### 動作環境
- Unity LTS Release2021.3.17f1（2023年1月時点における長期サポートバージョン）

### 必要ライセンス
- Unity Personal以上

### 必要パッケージ
- Newtonsoft Json：
com.unity.nuget.newtonsoft-json

## ライセンス
* ソースコードおよび関連ドキュメントの著作権は国土交通省に帰属します。
* 本ドキュメントは[Project PLATEAUのサイトポリシー](https://www.mlit.go.jp/plateau/sitepolicy/)（CCBY4.0および政府標準利用規約2.0）に従い提供されています。

## 注意事項

* 本レポジトリは参考資料として提供しているものです。動作保証は行っておりません。
* 予告なく変更・削除する可能性があります。
* 本レポジトリの利用により生じた損失及び損害等について、国土交通省はいかなる責任も負わないものとします。

## 参考資料　 <!-- 各リンクは納品時に更新 -->
* （ユースケース名）技術検証レポート: https://www.mlit.go.jp/plateau/libraries/technical-reports/
*  PLATEAU Webサイト Use caseページ「（ユースケース名）」: https://www.mlit.go.jp/plateau/use-case/
*  使用ライブラリ
- CameraControllerMayaLike.cs（naojitaniguchi）：
https://gist.github.com/naojitaniguchi/689b928b401f2c924491

